{% extends "base_template.html" %}

{% set title = "Upload dataset" %}

{% block content %}








<div class="d-flex flex-column flex-row-fluid gap-7 gap-lg-10">
    <!--begin::General options-->
    <div class="card card-flush py-4">


        <!--begin::Form-->
<form class="form" action="#" method="post">
    <!--begin::Input group-->
    <div class="form-group row">
        <!--begin::Label-->
        <label class="col-lg-2 col-form-label text-lg-right">Upload Files:</label>
        <!--end::Label-->

        <!--begin::Col-->
        <div class="col-lg-10">
            <!--begin::Dropzone-->
            <div class="dropzone dropzone-queue mb-2" id="kt_dropzonejs_example_3">
                <!--begin::Controls-->
                <div class="dropzone-panel mb-lg-0 mb-2">
                    <a class="dropzone-select btn btn-sm btn-primary me-2">Attach files</a>
                    <a class="dropzone-remove-all btn btn-sm btn-light-primary">Remove All</a>
                </div>
                <!--end::Controls-->

                <!--begin::Items-->
                <div class="dropzone-items wm-200px">
                    <div class="dropzone-item" style="display:none">
                        <!--begin::File-->
                        <div class="dropzone-file">
                            <div class="dropzone-filename" title="some_image_file_name.jpg">
                                <span data-dz-name>some_image_file_name.jpg</span>
                                <strong>(<span data-dz-size>340kb</span>)</strong>
                            </div>

                            <div class="dropzone-error" data-dz-errormessage></div>
                        </div>
                        <!--end::File-->

                        <!--begin::Progress-->
                        <div class="dropzone-progress">
                            <div class="progress">
                                <div
                                    class="progress-bar bg-primary"
                                    role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" data-dz-uploadprogress>
                                </div>
                            </div>
                        </div>
                        <!--end::Progress-->

                        <!--begin::Toolbar-->
                        <div class="dropzone-toolbar">
                            <span class="dropzone-delete" data-dz-remove><i class="bi bi-x fs-1"></i></span>
                        </div>
                        <!--end::Toolbar-->
                    </div>
                </div>
                <!--end::Items-->
            </div>
            <!--end::Dropzone-->

            <!--begin::Hint-->
            <span class="form-text text-muted">Max file size is 1MB and max number of files is 5.</span>
            <!--end::Hint-->
        </div>
        <!--end::Col-->
    </div>
    <!--end::Input group-->
</form>
<!--end::Form-->




        <!--begin::Card header-->
        <div class="card-header">
            <div class="card-title">
                <h2>Basic info</h2>
            </div>
        </div>
        <!--end::Card header-->
        <!--begin::Card body-->
        <div class="card-body pt-0">
            <!--begin::Input group-->
            <div class="mb-10 fv-row fv-plugins-icon-container">
                <!--begin::Label-->
                <label class="required form-label">Category Name</label>
                <!--end::Label-->
                <!--begin::Input-->
                <input type="text" name="category_name" class="form-control mb-2" placeholder="Product name" value="Footwear">
                <!--end::Input-->
                <!--begin::Description-->
                <div class="text-muted fs-7">A category name is required and recommended to be unique.</div>
                <!--end::Description-->
            <div class="fv-plugins-message-container fv-plugins-message-container--enabled invalid-feedback"></div></div>
            <!--end::Input group-->
            <!--begin::Input group-->
            <div>
                <!--begin::Label-->
                <label class="form-label">Description</label>
                <!--end::Label-->
                <!--begin::Editor-->
                <div role="toolbar" class="ql-toolbar ql-snow"><span class="ql-formats"><span class="ql-header ql-picker"><span class="ql-picker-label" tabindex="0" role="button" aria-expanded="false" aria-controls="ql-picker-options-0"><svg viewBox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"></polygon><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"></polygon></svg></span><span class="ql-picker-options" aria-hidden="true" tabindex="-1" id="ql-picker-options-0"><span tabindex="0" role="button" class="ql-picker-item" data-value="1"></span><span tabindex="0" role="button" class="ql-picker-item" data-value="2"></span><span tabindex="0" role="button" class="ql-picker-item"></span></span></span><select class="ql-header" style="display: none;"><option value="1"></option><option value="2"></option><option selected="selected"></option></select></span><span class="ql-formats"><button type="button" class="ql-bold" aria-pressed="false" aria-label="bold"><svg viewBox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"></path><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"></path></svg></button><button type="button" class="ql-italic" aria-pressed="false" aria-label="italic"><svg viewBox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"></line><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"></line><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"></line></svg></button><button type="button" class="ql-underline" aria-pressed="false" aria-label="underline"><svg viewBox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"></path><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"></rect></svg></button></span><span class="ql-formats"><button type="button" class="ql-image" aria-pressed="false" aria-label="image"><svg viewBox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"></rect><circle class="ql-fill" cx="6" cy="7" r="1"></circle><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline></svg></button><button type="button" class="ql-code-block" aria-pressed="false" aria-label="code-block"><svg viewBox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"></line></svg></button></span></div><div id="kt_ecommerce_add_category_description" name="kt_ecommerce_add_category_description" class="min-h-200px mb-2 ql-container ql-snow"><div class="ql-editor" contenteditable="true" data-placeholder="Type your text here..."><p>asdfas</p></div><div class="ql-tooltip ql-hidden"><a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a><input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL"><a class="ql-action"></a><a class="ql-remove"></a></div></div>
                <!--end::Editor-->
                <!--begin::Description-->
                <div class="text-muted fs-7">Set a description to the category for better visibility.</div>
                <!--end::Description-->
            </div>
            <!--end::Input group-->
        </div>
        <!--end::Card header-->
    </div>
    <!--end::General options-->
    <!--begin::Meta options-->
    <div class="card card-flush py-4">
        <!--begin::Card header-->
        <div class="card-header">
            <div class="card-title">
                <h2>Meta Options</h2>
            </div>
        </div>
        <!--end::Card header-->
        <!--begin::Card body-->
        <div class="card-body pt-0">
            <!--begin::Input group-->
            <div class="mb-10">
                <!--begin::Label-->
                <label class="form-label">Meta Tag Title</label>
                <!--end::Label-->
                <!--begin::Input-->
                <input type="text" class="form-control mb-2" name="meta_title" placeholder="Meta tag name">
                <!--end::Input-->
                <!--begin::Description-->
                <div class="text-muted fs-7">Set a meta tag title. Recommended to be simple and precise keywords.</div>
                <!--end::Description-->
            </div>
            <!--end::Input group-->
            <!--begin::Input group-->
            <div class="mb-10">
                <!--begin::Label-->
                <label class="form-label">Meta Tag Description</label>
                <!--end::Label-->
                <!--begin::Editor-->
                <div role="toolbar" class="ql-toolbar ql-snow"><span class="ql-formats"><span class="ql-header ql-picker"><span class="ql-picker-label" tabindex="0" role="button" aria-expanded="false" aria-controls="ql-picker-options-1"><svg viewBox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"></polygon><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"></polygon></svg></span><span class="ql-picker-options" aria-hidden="true" tabindex="-1" id="ql-picker-options-1"><span tabindex="0" role="button" class="ql-picker-item" data-value="1"></span><span tabindex="0" role="button" class="ql-picker-item" data-value="2"></span><span tabindex="0" role="button" class="ql-picker-item ql-selected"></span></span></span><select class="ql-header" style="display: none;"><option value="1"></option><option value="2"></option><option selected="selected"></option></select></span><span class="ql-formats"><button type="button" class="ql-bold" aria-pressed="false" aria-label="bold"><svg viewBox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"></path><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"></path></svg></button><button type="button" class="ql-italic" aria-pressed="false" aria-label="italic"><svg viewBox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"></line><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"></line><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"></line></svg></button><button type="button" class="ql-underline" aria-pressed="false" aria-label="underline"><svg viewBox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"></path><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"></rect></svg></button></span><span class="ql-formats"><button type="button" class="ql-image" aria-pressed="false" aria-label="image"><svg viewBox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"></rect><circle class="ql-fill" cx="6" cy="7" r="1"></circle><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline></svg></button><button type="button" class="ql-code-block" aria-pressed="false" aria-label="code-block"><svg viewBox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"></line></svg></button></span></div><div id="kt_ecommerce_add_category_meta_description" name="kt_ecommerce_add_category_meta_description" class="min-h-100px mb-2 ql-container ql-snow"><div class="ql-editor ql-blank" contenteditable="true" data-placeholder="Type your text here..."><p><br></p></div><div class="ql-tooltip ql-hidden"><a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a><input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL"><a class="ql-action"></a><a class="ql-remove"></a></div></div>
                <!--end::Editor-->
                <!--begin::Description-->
                <div class="text-muted fs-7">Set a meta tag description to the category for increased SEO ranking.</div>
                <!--end::Description-->
            </div>
            <!--end::Input group-->
            <!--begin::Input group-->
            <div>
                <!--begin::Label-->
                <label class="form-label">Meta Tag Keywords</label>
                <!--end::Label-->
                <!--begin::Editor-->
                <tags class="tagify form-control mb-2 tagify--focus" tabindex="-1">
<tag title="klj" contenteditable="false" tabindex="-1" class="tagify__tag " value="klj"><x title="" tabindex="-1" class="tagify__tag__removeBtn" role="button" aria-label="remove tag"></x><div><span autocapitalize="false" autocorrect="off" spellcheck="false" class="tagify__tag-text">klj</span></div></tag><tag title="lkhjlk" contenteditable="false" tabindex="-1" class="tagify__tag " value="lkhjlk"><x title="" tabindex="-1" class="tagify__tag__removeBtn" role="button" aria-label="remove tag"></x><div><span autocapitalize="false" autocorrect="off" spellcheck="false" class="tagify__tag-text">lkhjlk</span></div></tag><tag title="òp +" contenteditable="false" tabindex="-1" class="tagify__tag " value="òp +"><x title="" tabindex="-1" class="tagify__tag__removeBtn" role="button" aria-label="remove tag"></x><div><span autocapitalize="false" autocorrect="off" spellcheck="false" class="tagify__tag-text">òp +</span></div></tag><tag title="kljkljlñ" contenteditable="false" tabindex="-1" class="tagify__tag " value="kljkljlñ"><x title="" tabindex="-1" class="tagify__tag__removeBtn" role="button" aria-label="remove tag"></x><div><span autocapitalize="false" autocorrect="off" spellcheck="false" class="tagify__tag-text">kljkljlñ</span></div></tag><tag title="opikjlñk" contenteditable="false" tabindex="-1" class="tagify__tag " value="opikjlñk"><x title="" tabindex="-1" class="tagify__tag__removeBtn" role="button" aria-label="remove tag"></x><div><span autocapitalize="false" autocorrect="off" spellcheck="false" class="tagify__tag-text">opikjlñk</span></div></tag><tag title="ñ´lk" contenteditable="false" tabindex="-1" class="tagify__tag " value="ñ´lk"><x title="" tabindex="-1" class="tagify__tag__removeBtn" role="button" aria-label="remove tag"></x><div><span autocapitalize="false" autocorrect="off" spellcheck="false" class="tagify__tag-text">ñ´lk</span></div></tag><span contenteditable="" tabindex="0" data-placeholder="&ZeroWidthSpace;" aria-placeholder="" class="tagify__input" role="textbox" autocapitalize="false" autocorrect="off" spellcheck="false" aria-autocomplete="both" aria-multiline="false"></span>
&ZeroWidthSpace;
</tags><input id="kt_ecommerce_add_category_meta_keywords" name="kt_ecommerce_add_category_meta_keywords" class="form-control mb-2" tabindex="-1">
                <!--end::Editor-->
                <!--begin::Description-->
                <div class="text-muted fs-7">Set a list of keywords that the category is related to. Separate the keywords by adding a comma 
                <code>,</code>between each keyword.</div>
                <!--end::Description-->
            </div>
            <!--end::Input group-->
        </div>
        <!--end::Card header-->
    </div>
    <!--end::Meta options-->
    <!--begin::Automation-->
    <div class="card card-flush py-4">
        <!--begin::Card header-->
        <div class="card-header">
            <div class="card-title">
                <h2>Automation</h2>
            </div>
        </div>
        <!--end::Card header-->
        <!--begin::Card body-->
        <div class="card-body pt-0">
            <!--begin::Input group-->
            <div>
                <!--begin::Label-->
                <label class="form-label mb-5">Product assignment method</label>
                <!--end::Label-->
                <!--begin::Methods-->
                <!--begin::Input row-->
                <div class="d-flex fv-row">
                    <!--begin::Radio-->
                    <div class="form-check form-check-custom form-check-solid">
                        <!--begin::Input-->
                        <input class="form-check-input me-3" name="method" type="radio" value="0" id="kt_ecommerce_add_category_automation_0">
                        <!--end::Input-->
                        <!--begin::Label-->
                        <label class="form-check-label" for="kt_ecommerce_add_category_automation_0">
                            <div class="fw-bold text-gray-800">Manual</div>
                            <div class="text-gray-600">Add products to this category one by one by manually selecting this category during product creation or update.</div>
                        </label>
                        <!--end::Label-->
                    </div>
                    <!--end::Radio-->
                </div>
                <!--end::Input row-->
                <div class="separator separator-dashed my-5"></div>
                <!--begin::Input row-->
                <div class="d-flex fv-row">
                    <!--begin::Radio-->
                    <div class="form-check form-check-custom form-check-solid">
                        <!--begin::Input-->
                        <input class="form-check-input me-3" name="method" type="radio" value="1" id="kt_ecommerce_add_category_automation_1" checked="checked">
                        <!--end::Input-->
                        <!--begin::Label-->
                        <label class="form-check-label" for="kt_ecommerce_add_category_automation_1">
                            <div class="fw-bold text-gray-800">Automatic</div>
                            <div class="text-gray-600">Products matched with the following conditions will be automatically assigned to this category.</div>
                        </label>
                        <!--end::Label-->
                    </div>
                    <!--end::Radio-->
                </div>
                <!--end::Input row-->
                <!--end::Methods-->
            </div>
            <!--end::Input group-->
            <!--begin::Input group-->
            <div class="mt-10" data-kt-ecommerce-catalog-add-category="auto-options">
                <!--begin::Label-->
                <label class="form-label">Conditions</label>
                <!--end::Label-->
                <!--begin::Conditions-->
                <div class="d-flex flex-wrap align-items-center text-gray-600 gap-5 mb-7">
                    <span>Products must match:</span>
                    <!--begin::Radio-->
                    <div class="form-check form-check-custom form-check-solid">
                        <input class="form-check-input" type="radio" name="conditions" value="" id="all_conditions" checked="checked">
                        <label class="form-check-label" for="all_conditions">All conditions</label>
                    </div>
                    <!--end::Radio-->
                    <!--begin::Radio-->
                    <div class="form-check form-check-custom form-check-solid">
                        <input class="form-check-input" type="radio" name="conditions" value="" id="any_conditions">
                        <label class="form-check-label" for="any_conditions">Any conditions</label>
                    </div>
                    <!--end::Radio-->
                </div>
                <!--end::Conditions-->
                <!--begin::Repeater-->
                <div id="kt_ecommerce_add_category_conditions">
                    <!--begin::Form group-->
                    <div class="form-group">
                        <div data-repeater-list="kt_ecommerce_add_category_conditions" class="d-flex flex-column gap-3">
                            <div data-repeater-item="" class="form-group d-flex flex-wrap align-items-center gap-5">
                                <!--begin::Select2-->
                                <div class="w-100 w-md-200px">
                                    <select class="form-select select2-hidden-accessible" name="kt_ecommerce_add_category_conditions[0][condition_type]" data-placeholder="Select an option" data-kt-ecommerce-catalog-add-category="condition_type" data-select2-id="select2-data-134-yl5n" tabindex="-1" aria-hidden="true">
                                        <option></option>
                                        <option value="title">Product Title</option>
                                        <option value="tag" selected="selected" data-select2-id="select2-data-136-hzcl">Product Tag</option>
                                        <option value="price">Prodict Price</option>
                                    </select><span class="select2 select2-container select2-container--bootstrap5" dir="ltr" data-select2-id="select2-data-135-ffdx" style="width: 100%;"><span class="selection"><span class="select2-selection select2-selection--single form-select" role="combobox" aria-haspopup="true" aria-expanded="false" tabindex="0" aria-disabled="false" aria-labelledby="select2-kt_ecommerce_add_category_conditions0condition_type-8m-container" aria-controls="select2-kt_ecommerce_add_category_conditions0condition_type-8m-container"><span class="select2-selection__rendered" id="select2-kt_ecommerce_add_category_conditions0condition_type-8m-container" role="textbox" aria-readonly="true" title="Product Tag">Product Tag</span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span></span></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>
                                </div>
                                <!--end::Select2-->
                                <!--begin::Select2-->
                                <div class="w-100 w-md-200px">
                                    <select class="form-select select2-hidden-accessible" name="kt_ecommerce_add_category_conditions[0][condition_equals]" data-placeholder="Select an option" data-kt-ecommerce-catalog-add-category="condition_equals" data-select2-id="select2-data-137-trqw" tabindex="-1" aria-hidden="true">
                                        <option></option>
                                        <option value="equal" selected="selected" data-select2-id="select2-data-139-fzoa">is equal to</option>
                                        <option value="notequal">is not equal to</option>
                                        <option value="greater">is greater than</option>
                                        <option value="less">is less than</option>
                                        <option value="starts">starts with</option>
                                        <option value="ends">ends with</option>
                                    </select><span class="select2 select2-container select2-container--bootstrap5" dir="ltr" data-select2-id="select2-data-138-qw5h" style="width: 100%;"><span class="selection"><span class="select2-selection select2-selection--single form-select" role="combobox" aria-haspopup="true" aria-expanded="false" tabindex="0" aria-disabled="false" aria-labelledby="select2-kt_ecommerce_add_category_conditions0condition_equals-k7-container" aria-controls="select2-kt_ecommerce_add_category_conditions0condition_equals-k7-container"><span class="select2-selection__rendered" id="select2-kt_ecommerce_add_category_conditions0condition_equals-k7-container" role="textbox" aria-readonly="true" title="is equal to">is equal to</span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span></span></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>
                                </div>
                                <!--end::Select2-->
                                <!--begin::Input-->
                                <input type="text" class="form-control mw-100 w-200px" name="kt_ecommerce_add_category_conditions[0][condition_label]" placeholder="">
                                <!--end::Input-->
                                <!--begin::Button-->
                                <button type="button" data-repeater-delete="" class="btn btn-sm btn-icon btn-light-danger">
                                    <i class="ki-duotone ki-cross fs-2">
                                        <span class="path1"></span>
                                        <span class="path2"></span>
                                    </i>
                                </button>
                                <!--end::Button-->
                            </div>
                        </div>
                    </div>
                    <!--end::Form group-->
                    <!--begin::Form group-->
                    <div class="form-group mt-5">
                        <!--begin::Button-->
                        <button type="button" data-repeater-create="" class="btn btn-sm btn-light-primary">
                        <i class="ki-duotone ki-plus fs-2"></i>Add another condition</button>
                        <!--end::Button-->
                    </div>
                    <!--end::Form group-->
                </div>
                <!--end::Repeater-->
            </div>
            <!--end::Input group-->
        </div>
        <!--end::Card header-->
    </div>
    <!--end::Automation-->
    <div class="d-flex justify-content-end">
        <!--begin::Button-->
        <a href="apps/ecommerce/catalog/products.html" id="kt_ecommerce_add_product_cancel" class="btn btn-light me-5">Cancel</a>
        <!--end::Button-->
        <!--begin::Button-->
        <button type="submit" id="kt_ecommerce_add_category_submit" class="btn btn-primary">
            <span class="indicator-label">Save Changes</span>
            <span class="indicator-progress">Please wait... 
            <span class="spinner-border spinner-border-sm align-middle ms-2"></span></span>
        </button>
        <!--end::Button-->
    </div>
</div>

    {% if is_edit %}
    <h1 class="h2 mb-3"><b>Edit</b> dataset: {{ form.title.data }}</h1>
    {% else %}
    <h1 class="h2 mb-3"><b>Upload</b> dataset</h1>
    {% endif %}

    <div class="row">
        <div class="col-12 mb-3">
            <div class="alert alert-warning" role="alert" id="test_zenodo_connection_error" style="display: none">
                <div class="alert-message">

                    <h4 class="alert-heading"><i class="align-middle" data-feather="alert-triangle"></i> Limited
                        connection to the Zenodo API</h4>
                    <p class="p-0 m-0">
                        There seems to be some kind of problem with the Zenodo API and synchronization of your dataset
                        files may not be possible. We will save your files locally to eventually synchronize them with
                        Zenodo. Sorry for the inconvenience, Zenodo is an external service and we can't do
                        anything about it.
                    </p>
                </div>
            </div>
        </div>

    </div>

    {% if messages %}
        <ul>
            {% for message in messages %}
                <li>{{ message }}</li>
            {% endfor %}
        </ul>
    {% endif %}

    <div class="row">

        <div class="col-xl-6 col-lg-12 col-md-12 col-sm-12">
            <div id="basic_info_form">

                {{ form.hidden_tag() }}

                {% if is_edit %}
                    <input type="hidden" id="datasetId" value="{{dataset.id}}"/>
                {% endif %}

                <div class="row">

                    <div class="col-12">

                        <h1 class="h3 mb-3">Basic info</h1>

                        <div class="row" style="padding-left: 2rem">

                            <div class="col-lg-6 col-xs-12 col-md-12">
                                <div class="mb-3">
                                    {{ form.title.label(class="form-label") }} *
                                    {{ form.title(class="form-control") }}
                                    {% for error in form.title.errors %}
                                        <span style="color: red;">{{ error }}</span>
                                    {% endfor %}
                                </div>
                            </div>

                            <div class="col-12">
                                <div class="mb-3">
                                    {{ form.desc.label(class="form-label") }} *
                                    {{ form.desc(rows=4, class="form-control") }}
                                    {% for error in form.desc.errors %}
                                        <span style="color: red;">{{ error }}</span>
                                    {% endfor %}
                                </div>
                            </div>

                            <div class="col-lg-6 col-6">
                                <div class="mb-3">
                                    {{ form.publication_type.label(class="form-label") }}
                                    {{ form.publication_type(class="form-control") }}
                                </div>

                            </div>

                            <div class="col-lg-6 col-6">
                                <div class="mb-3">
                                    {{ form.publication_doi.label(class="form-label") }}
                                    {{ form.publication_doi(class="form-control") }}
                                    {% for error in form.publication_doi.errors %}
                                        <span style="color: red;">{{ error }}</span>
                                    {% endfor %}
                                </div>
                            </div>

                            <div class="col-6">
                                <div class="mb-3">
                                    {{ form.tags.label(class="form-label") }}
                                    {{ form.tags(class="form-control") }}
                                    {% for error in form.tags.errors %}
                                        <span style="color: red;">{{ error }}</span>
                                    {% endfor %}
                                </div>
                            </div>

                        </div>

                        <h1 class="h3 mb-3 mt-4">
                          Authors
                        </h1>

                        <div class="row" style="padding-left: 2rem" id="authors_form">

                            <div class="col-12">

                                <div class="mb-3">

                                    <div id="authors">

                                        {% if is_edit %}

                                            {% if not dataset.is_anonymous()%}
                                                {% for subform in form.authors %}

                                                    <div class="author row" style="border: 2px dotted rgb(204, 204, 204); border-radius: 10px; padding: 10px; margin: 10px 0px; background-color: white;">
                                                        <div class="col-lg-6 col-12 mb-3">
                                                            {{ subform.form.name.label(class="form-label") }}
                                                            {{ subform.form.name.data(class="form-control" ) }}
                                                        </div>
                                                        <div class="col-lg-6 col-12 mb-3">
                                                            {{ subform.form.affiliation.label(class="form-label") }}
                                                            {{ subform.form.affiliation.data(class="form-control" ) }}
                                                        </div>
                                                        <div class="col-lg-6 col-12 mb-3">
                                                            {{ subform.form.orcid.label(class="form-label") }}
                                                            {{ subform.form.orcid.data(class="form-control") }}
                                                        </div>
                                                        <div class="col-12 mb-2">
                                                            <button class="btn btn-danger btn-sm remove-author" type="button" onclick="removeAuthor(this)">Remove author</button>
                                                        </div>
                                                    </div>

                                                {% endfor %}
                                            {% endif %}



                                        {% else %}

                                            {% for subform in form.authors %}
                                            <div class="row author" {% if not loop.first %}
                                                style="border:2px dotted #ccc;border-radius:10px;padding:10px;margin:10px 0; background-color: white"
                                                {% endif %}
                                            >
                                                <div class="col-lg-6 col-12 mb-3">
                                                    {{ subform.form.name.label(class="form-label") }}
                                                    {{ subform.form.name(class="form-control", disabled=loop.first) }}
                                                    {% for error in subform.name.errors %}
                                                        <span style="color: red;">{{ error }}</span>
                                                    {% endfor %}
                                                </div>

                                                <div class="col-lg-6 col-12 mb-3">
                                                    {{ subform.form.affiliation.label(class="form-label") }}
                                                    {{ subform.form.affiliation(class="form-control", disabled=loop.first) }}
                                                    {% for error in subform.name.errors %}
                                                        <span style="color: red;">{{ error }}</span>
                                                    {% endfor %}
                                                </div>

                                                <div class="col-lg-6 col-12 mb-3">
                                                    {{ subform.orcid.label(class="form-label") }}
                                                    {{ subform.orcid(class="form-control", disabled=loop.first) }}
                                                    {% for error in subform.orcid.errors %}
                                                        <span style="color: red;">{{ error }}</span>
                                                    {% endfor %}
                                                </div>
                                            </div>
                                            {% endfor %}

                                        {% endif %}


                                    </div>
                                    <button type="button" class="btn btn-secondary" id="add_author">Add author
                                    </button>

                                </div>

                            </div>



                        </div>

                        <div class="row" style="padding-left: 2rem">
                            <div class="col-12">
                                <label class="form-check">
                                    <input id="dataset_anonymous" class="form-check-input" type="checkbox" value=""
                                           {% if form.dataset_anonymous.data %} checked {% endif %}>
                                    <span class="form-check-label" style="font-size: 15px">
                                        <b>Anonymize dataset</b> (this will cause the dataset in both UVLHub and Zenodo to appear as anonymized until it is changed)
                                    </span>
                                </label>
                            </div>
                        </div>




                    </div>

                </div>

                <div class="row">

                    {% if error %}

                        <div class="mt-3 col-lg-6 col-12">
                            <span style="color: red;">{{ error }}</span>
                        </div>

                    {% endif %}

                </div>


            </div>
        </div>

        <div class="col-xl-6 col-lg-12 col-md-12 col-sm-12">

            <h1 class="h3 mb-3 mt-2">UVL models</h1>

            {% if is_edit %}

            It is currently not possible to edit dataset models. This is a feature under development, it will be available in future versions.

            <div id="uploaded_models_form">

                <ul class="mt-2" id="file-list">

                    {% for feature_model in dataset.feature_models %}

                        {% for hubfile in feature_model.hubfiles %}
                            <input type="hidden" value="{{hubfile.name}}" name="feature_models-0-uvl_filename">
                        {% endfor %}
                        
                    {% endfor %}

                </ul>

            </div>

            {% else %}

            <div id="uploaded_models_form" style="padding-left: 2rem">

                <form action="{{ url_for('hubfile.upload_file') }}" class="dropzone" id="myDropzone">
                    <div id="dropzone-text"></div>
                </form>

                <span class="text-danger" id="alerts" style="display: none">
                    </span>

                <ul class="mt-2" id="file-list"></ul>

                
                

            </div>

            {% endif %}


        </div>

    </div>

    {% if is_edit %}

    <div class="row" id="submit_dataset">

        <div class="col-12">

            <hr>

            <h1 class="h3 mb-3 mt-2">Save dataset</h1>

            <div style="padding-left: 2rem">


                <button id="upgradeButton" class="submitButton btn btn-primary mt-2">
                    <i data-feather="save" class="center-button-icon"></i>
                    Save dataset</button>

                <div id="loading" style="display: none">
                    <img width="40px" src="{{ url_for("static", filename="gifs/loading.svg") }}"/>
                    Saving dataset, please wait...
                </div>

                <div class="row">
                    <div class="col-12 mb-3">

                    </div>
                </div>

                <div class="alert alert-error" role="alert" id="upload_error"
                     style="display: none">
                    <div class="alert-message">

                        <h4 class="alert-heading"><i class="align-middle" data-feather="alert-triangle"></i> Limited
                            connection to the Zenodo API</h4>
                        <p class="p-0 m-0">
                            There seems to be some kind of problem with the Zenodo API and synchronization of your
                            dataset
                            files may not be possible. We will save your files locally to eventually synchronize
                            them with
                            Zenodo. Sorry for the inconvenience, Zenodo is an external service and we can't do
                            anything about it.
                        </p>
                    </div>
                </div>

                <span class="text-danger mt-2" id="upload_error" style="display: none"></span>

            </div>

        </div>

    </div>


    {% else %}

    <div class="row" id="submit_dataset" style="display: none">

        <div class="col-12">

            <hr>

            <h1 class="h3 mb-3 mt-2">Upload dataset</h1>

            <div style="padding-left: 2rem">

                <label class="form-check">
                    <input id="agreeCheckbox" class="form-check-input" type="checkbox" value="">
                    <span class="form-check-label" style="font-size: 15px">
                                I agree to have my feature models automatically uploaded to Zenodo and made available to the public according to the <a
                            href="https://en.wikipedia.org/wiki/Open_science" target="_blank">Open Science</a> manifesto
                            </span>
                </label>

                <button id="uploadButton" class="submitButton btn btn-primary mt-2" disabled>
                    <i data-feather="upload" class="center-button-icon"></i>
                    Upload dataset
                </button>

                <div id="loading" style="display: none">
                    <img width="40px" src="{{ url_for("static", filename="gifs/loading.svg") }}"/>
                    Uploading dataset, please wait...
                </div>

                <div class="row">
                    <div class="col-12 mb-3">

                    </div>
                </div>

                <div class="alert alert-error" role="alert" id="upload_error"
                     style="display: none">
                    <div class="alert-message">

                        <h4 class="alert-heading"><i class="align-middle" data-feather="alert-triangle"></i> Limited
                            connection to the Zenodo API</h4>
                        <p class="p-0 m-0">
                            There seems to be some kind of problem with the Zenodo API and synchronization of your
                            dataset
                            files may not be possible. We will save your files locally to eventually synchronize
                            them with
                            Zenodo. Sorry for the inconvenience, Zenodo is an external service and we can't do
                            anything about it.
                        </p>
                    </div>
                </div>

                <span class="text-danger mt-2" id="upload_error" style="display: none"></span>

            </div>

        </div>

    </div>

    {% endif %}


{% endblock %}
    
{% block scripts %}

    {% if not is_edit %}
    <script>
        let hubfiles = {{ hubfiles|tojson|safe }};
    </script>
    {% endif %}


    <script src="{{ url_for('zenodo.assets', subfolder='js', filename='scripts.js') }}"></script>
    <script src="{{ url_for('dataset.assets', subfolder='js', filename='scripts.js') }}"></script>
    <script src="{{ url_for('hubfile.assets', subfolder='dist', filename='hubfile.bundle.js') }}"></script>

{% endblock %}