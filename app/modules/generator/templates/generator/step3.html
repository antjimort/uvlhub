{% extends "generator/index.html" %}

{% block title %}Generate random feature models{% endblock %}

{% block wizard_content %}
<div class="row justify-content-center">
    <div class="col-md-8">

        <h3 class="mb-3">Constraints</h3>

        <!-- NÃºmero de constraints -->
        <div class="mb-3">
            <label class="form-label">Number of constraints</label>
            <div class="d-flex align-items-center gap-3">
                <span>Min:</span>
                <input type="number" class="form-control" style="width: 100px;" min="1" max="10000" id="num_constraints_min" name="num_constraints_min" value="{{ values.get('num_constraints_min', 1) }}">
                {% if errors.get('num_constraints_min') %}
                    <div class="text-danger">{{ errors['num_constraints_min'] }}</div>
                {% endif %}
                <span>Max:</span>
                <input type="number" class="form-control" style="width: 100px;" min="1" max="10000" id="num_constraints_max" name="num_constraints_max" value="{{ values.get('num_constraints_max', 10) }}">
                {% if errors.get('num_constraints_max') %}
                    <div class="text-danger">{{ errors['num_constraints_max'] }}</div>
                {% endif %}
            </div>
        </div>

        <!-- Extra Constraint Representativeness -->
        <div class="mb-3">
            <label class="form-label">Extra Constraint Representativeness: 
                <small>number of times a feature may appear in each constraint (must be less than max variables per constraint)</small>
            </label>
            <input type="number" step="1" min="1" max="10000" class="form-control" name="extra_constraint_repr" value="{{ values.get('extra_constraint_repr', 1) }}">
            {% if errors.get('extra_constraint_repr') %}
                <div class="text-danger">{{ errors['extra_constraint_repr'] }}</div>
            {% endif %}
        </div>

        <!-- Variables per constraint -->
        <div class="mb-3">
            <label class="form-label">Variables per constraint</label>
            <div class="d-flex align-items-center gap-3">
                <span>Min:</span>
                <input type="number" class="form-control" style="width: 100px;" min="1" max="10000" id="vars_per_ctc_min" name="vars_per_ctc_min" value="{{ values.get('vars_per_ctc_min', 1) }}">
                {% if errors.get('vars_per_ctc_min') %}
                    <div class="text-danger">{{ errors['vars_per_ctc_min'] }}</div>
                {% endif %}
                <span>Max:</span>
                <input type="number" class="form-control" style="width: 100px;" min="1" max="10000" id="vars_per_ctc_max" name="vars_per_ctc_max" value="{{ values.get('vars_per_ctc_max', 10) }}">
                {% if errors.get('vars_per_ctc_max') %}
                    <div class="text-danger">{{ errors['vars_per_ctc_max'] }}</div>
                {% endif %}
                <span class="text-muted ms-2" style="font-size: 13px;">Note: max variables per constraint cannot be greater than max number of features</span>
            </div>
        </div>

        <!-- Distribution -->
        <div class="mb-3">
            <label class="form-label">Distribution</label>
            <div class="row">
                <div class="col">
                    <label class="form-label">Boolean:</label>
                    <input type="number" step="0.01" min="0" max="1" class="form-control" name="ctc_dist_boolean" value="{{ values.get('ctc_dist_boolean', 0.7) }}">
                </div>
                <div class="col">
                    <label class="form-label">Integer:</label>
                    <input type="number" step="0.01" min="0" max="1" class="form-control" name="ctc_dist_integer" value="{{ values.get('ctc_dist_integer', 0.2) }}">
                </div>
                <div class="col">
                    <label class="form-label">Real:</label>
                    <input type="number" step="0.01" min="0" max="1" class="form-control" name="ctc_dist_real" value="{{ values.get('ctc_dist_real', 0.7) }}">
                </div>
                <div class="col">
                    <label class="form-label">String:</label>
                    <input type="number" step="0.01" min="0" max="1" class="form-control" name="ctc_dist_string" value="{{ values.get('ctc_dist_string', 0.0) }}">
                </div>
            </div>
        </div>

        <!-- Boolean level constraints -->
        <div class="mb-3">
            <label class="form-label">Boolean level (only if greater than 0)</label>
            <div class="d-flex gap-2 flex-wrap">
                <span>!</span>
                <input type="number" step="0.01" min="0" max="1" class="form-control" style="width: auto;" name="prob_not" value="{{ values.get('prob_not', 0.3) }}" placeholder="!">
                <span>&</span>
                <input type="number" step="0.01" min="0" max="1" class="form-control" style="width: auto;" name="prob_and" value="{{ values.get('prob_and', 0.7) }}" placeholder="&">
                <span>|</span>
                <input type="number" step="0.01" min="0" max="1" class="form-control" style="width: auto;" name="prob_or" value="{{ values.get('prob_or', 0.1) }}" placeholder="|">
                <span>=></span>
                <input type="number" step="0.01" min="0" max="1" class="form-control" style="width: auto;" name="prob_implies" value="{{ values.get('prob_implies', 0.1) }}" placeholder="=>">
                <span>&lt;=&gt;</span>
                <input type="number" step="0.01" min="0" max="1" class="form-control" style="width: auto;" name="prob_equiv" value="{{ values.get('prob_equiv', 0.1) }}" placeholder="<=>">
            </div>
        </div>

        <!-- Arithmetic level constraints -->
        <div class="mb-3">
            <label class="form-label">Arithmetic level constraints <small>(only if Arithmetic level is selected)</small></label>
            <div class="row">
                <div class="col">
                    <label>+</label>
                    <input type="number" step="0.01" min="0" max="1" class="form-control" name="prob_plus" value="{{ values.get('prob_plus', 0.7) }}">
                </div>
                <div class="col">
                    <label>-</label>
                    <input type="number" step="0.01" min="0" max="1" class="form-control" name="prob_minus" value="{{ values.get('prob_minus', 0.2) }}">
                </div>
                <div class="col">
                    <label>*</label>
                    <input type="number" step="0.01" min="0" max="1" class="form-control" name="prob_times" value="{{ values.get('prob_times', 0.7) }}">
                </div>
                <div class="col">
                    <label>/</label>
                    <input type="number" step="0.01" min="0" max="1" class="form-control" name="prob_div" value="{{ values.get('prob_div', 0.0) }}">
                </div>
                <div class="col">
                    <label>=</label>
                    <input type="number" step="0.01" min="0" max="1" class="form-control" name="prob_eq" value="{{ values.get('prob_eq', 0.0) }}">
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <label>&lt;</label>
                    <input type="number" step="0.01" min="0" max="1" class="form-control" name="prob_lt" value="{{ values.get('prob_lt', 0.2) }}">
                </div>
                <div class="col">
                    <label>&gt;</label>
                    <input type="number" step="0.01" min="0" max="1" class="form-control" name="prob_gt" value="{{ values.get('prob_gt', 0.7) }}">
                </div>
                <div class="col">
                    <label>&lt;=</label>
                    <input type="number" step="0.01" min="0" max="1" class="form-control" name="prob_leq" value="{{ values.get('prob_leq', 0.0) }}">
                </div>
                <div class="col">
                    <label>&gt;=</label>
                    <input type="number" step="0.01" min="0" max="1" class="form-control" name="prob_geq" value="{{ values.get('prob_geq', 0.0) }}">
                </div>
            </div>
            <div class="row mt-2">
                <label>Aggregate functions (only if selected)</label>
                <div class="col">
                    <label>sum()</label>
                    <input type="number" step="0.01" min="0" max="1" class="form-control" name="prob_sum" value="{{ values.get('prob_sum', 0.0) }}">
                </div>
                <div class="col">
                    <label>avg()</label>
                    <input type="number" step="0.01" min="0" max="1" class="form-control" name="prob_avg" value="{{ values.get('prob_avg', 0.0) }}">
                </div>
            </div>
        </div>

        <!-- Type level constraints -->
        <div class="mb-3">
            <label class="form-label">Type level constraints <small>(only if Type level and String constraints are selected)</small></label>
            <div>
                <label>len()</label>
                <input type="number" step="0.01" min="0" max="1" class="form-control d-inline-block" name="prob_len" value="{{ values.get('prob_len', 0.7) }}" style="width: 90px;">
            </div>
        </div>
    </div>
</div>
{% endblock %}
